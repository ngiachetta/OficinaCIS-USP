---
title: "Exercícios"
output: html_notebook
---

# Indexação e Slicing de Vetores e Listas

Dado os vetores abaixo, como nós podemos selecionar o primeiro elemento do v1 e o quarto do v2?

```{r}
v1 <- c(100, 200, 300, 400)
v2 <- c("a", "b", "c", "d")
```

Resposta

```{r}
v1[1]

v2[4]
```

Selecione o primeiro e o segundo elemento de v1 e o segundo e quarto do v2

```{r}
v1[c(1,2)]

v2[c(2,4)]
```

Dado o vetor abaixo, selecione do segundo até o nono elemento. Guarde o elemento em um objeto(v4) e verifique qual o seu tamanho.

```{r}
v3 <- c(1:20)

v3[2:9]

v4 <- v3[2:9]

length(v4)
```

Dado o vetor abaixo, selecione o elemento "a". Qual o seu valor?

```{r}
v5 <- c(runif(5, 1,2))
names(v5) <- c("a", "b", "c", "d", "e")

v5['a']
```

E os elementos b, d e?

```{r}
v5[c("b", "d", "e")]
```

Selecione os elementos maiores que 4

```{r}
v6 <- c(rep(2,2), seq(3,10,2))

v6[v6>4]
```

De que outra forma nos podemos encontrar os elementos maiores que 4?

```{r}
filtro <- v6>4

v6[filtro]
```

Dado a lista abaixo, que é composta por um vetor, dois data frames e uma matrix. Selecione cada um dos elementos, utilizando: Single brackets e Double brackets (associado ao nome do elemento ou não). Qual a diferença?

```{r}
v <- c(rnorm(20))

df1 <- data.frame(PIB = runif(20, 200,400), Estado = letters[1:20])

df2 <- data.frame(x = runif(10), y = rnorm(10,3,5), z = seq(2,20,2))

m <- matrix(1:10, nrow = 2)

lista <- list(vetor = v,
              dataframe1 = df1,
              dataframe2 = df2,
              matrix = m)
########

lista[1]

lista['vetor']

lista[2]

lista['dataframe1']

#...

lista[[1]]

lista[['vetor']]

lista[[2]]

lista[['dataframe1']]

#...

lista$vetor

lista$dataframe1
```

Selecione o vetor presente na lista e a este vetor, selecione os dois primeiros elementos.

```{r}
lista$vetor[c(1,2)]

lista[[1]][c(1,2)]

lista[['vetor']][c(1,2)]
```

Selecione a matrix na lista e a esta matrix, selecione a segunda linha e as duas primeiras colunas.

```{r}
lista$matrix[2, c(1,2)]

lista[[4]][2, c(1,2)]
```

Selecione o dataframe2 e selecione as 5 primeiras linhas da coluna y.

```{r}
lista$dataframe2[1:5,2]

lista[[3]][1:5,2]

lista[[3]][1:5,'y']
```

Crie um algoritmo que "printa" somente os números pares de um vetor. Dica: Qual é o resultado de `2%%2`?

```{r}
v7 <- 1:30

for(i in seq_along(v7)){
  if(v7[i]%%2 == 0){
    print(v7[i])
  }
}
```

Um político recebeu 20 amigos em sua casa, 2 do PT, 5 do PSDB, 3 do PMDB, 2 do PSOL, 4 do PR e 4 do PSD. Este político sabe que se o amigo é do PT, PR e PSD ele recebe apoio na proxíma eleição. Quantos então não demostraram apoio?

```{r}
amigos <- c(PT = 2, PSBD  = 5, PMDB = 3, PSOL = 2, PR = 4, PSD = 4)

apoio <- c()

for (i in 1:length(amigos)){
  if (names(amigos[i]) == "PT" | names(amigos[i]) == "PR" | names(amigos[i]) == "PSD"){
    apoio[i] <- amigos[i]
  }else{
    apoio[i] <- 0
  }
}

print(sum(apoio))

```


# Pipe

Calcule a soma do vetor v7, depois faça sua raiz quadrada e com o seu resultado calcule o seu cosseno.

```{r}
v7 <- 1:100

cos(sqrt(sum(v7)))

v7 %>%
  sum %>% 
  sqrt %>%
  cos
```

Vamos pensar no seguinte problema:

Um município localizado na cidade X tem 1000 habitantes e no mês anterior ocorreram as eleições para representante do município. Quatro candidatos concorreram e o jornal da cidade divulgou o total de votos recebidos por eles da seguinte forma:

> "Em entrevista ao Jornal da cidade X:\n Candidato 1: Eu recebi 200 votos\n Candidato 2: Eu recebi 300 votos\n Candidato 3: Eu recebi 250 votos\n Candidato 4: Não recebi nenhum voto"

O Jornal então pediu ajuda para alguns pesquisadores. Eles queriam saber o quanto o total de votos representam sobre a população total e qual a diferença percentual do total de votantes do ano em questão para os anos de 2015 (80%), 2014(60.9%), 2013 (65%), 2012 (92.3%).

Dicas:

- Use os pacotes `stringr` e `purrr`

- Use o pipe

- Pense em como este regex pode te ajudar: "[0-9]+"

```{r}
library(stringr)
library(purrr)

porcentagem <- function(Votos,hab){
  return(Votos/hab*100)
}

difer <- function(PorcentVotos){
  anos <- c(A2015 = 80.0,
            A2014 = 60.9,
            A2013 = 65.0,
            A2012 = 92.3)
  return(PorcentVotos-anos)
}

p1 <- "Eu recebi 200 votos"
p2 <- "Eu recebi 300 votos"
p3 <- "Eu recebi 250 votos"
p4 <- "Não recebi nenhum voto"


listaP <- list(p1, p2, p3, p4)

listaP %>% 
  map(str_extract, "[0-9]+") %>% 
  unlist %>% as.numeric %>% 
  sum(na.rm = T) %>% 
  porcentagem(hab = 1000) %>% difer
```

